version: 0.1
frontend:
    phases:
        preBuild:
            commands:
                - npm cache clean
                - npm install
        build:
            commands:
                # This makes sure that the commit is not deployed if the tests fail.
                - npm run test && npm run build
    artifacts:
        baseDirectory: build
        files:
            - "**/*"
    cache:
        paths:
            - node_modules/**/*




# version: 0.1
# frontend:
#     phases:
#         preTest:
#             commands:
#                 - npm cache clean
#                 - npm ci
#                 - npm install wait-on
#                 - npm install pm2
#                 - npm install mocha@5.2.0 mochawesome mochawesome-merge mochawesome-report-generator
#                 - npx pm2 start npm -- start
#                 - "npx wait-on http://localhost:3000"
#         test:
#             commands:
#                 - npm run test
#                 - 'npx cypress run --reporter mochawesome --reporter-options "reportDir=cypress/report/mochawesome-report,overwrite=false,html=false,json=true,timestamp=mmddyyyy_HHMMss"'
#         postTest:
#             commands:
#                 - npx mochawesome-merge cypress/report/mochawesome-report/mochawesome*.json > cypress/report/mochawesome.json
#                 - npx pm2 kill
#     artifacts:
#         baseDirectory: cypress
#         configFilePath: "**/mochawesome.json"
#         files:
#             - "**/*.png"
#             - "**/*.mp4"
# cache:
#     paths:
#         - public/**/*

